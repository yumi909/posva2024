<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>the voices</title>
    <link rel="stylesheet" href="style.css">
    <!-- Подключаем шрифт Ubuntu -->
    <link href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>

    <!-- Фоновое изображение -->
    <div class="background-image">
        <!-- Заголовок на странице -->
        <div class="header">
            <h1>the voices</h1>
        </div>
    </div>

    <!-- Текст для главной страницы -->
    <div class="main-text">
        <p>of universe</p>
    </div>

    <!-- Плееры -->
    <div class="players">
        <!-- Плеер SoundCloud -->
        <h2>tap play here</h2>
        <iframe id="soundcloudPlayer" src="https://w.soundcloud.com/player/?url=https%3A//api.soundcloud.com/playlists/5281179&color=%23ff5500&auto_play=true" frameborder="0" allow="autoplay"></iframe>

        <!-- Кнопки для переключения на следующий и предыдущий трек SoundCloud -->
        <button id="prevSoundCloud">Предыдущее</button>
        <button id="nextSoundCloud">Следующее</button>

        <!-- Плеер с GitHub -->
        <h2>and here</h2>

        <!-- Плеер для переключения между файлами с автозапуском -->
        <audio id="audioPlayer" controls autoplay>
            <source id="audioSource" type="audio/mp3">
            Ваш браузер не поддерживает элемент audio.
        </audio>

        <!-- Шкала регулировки громкости -->
        <label for="volumeControl">Громкость:</label>
        <input id="volumeControl" type="range" min="0" max="1" step="0.1" value="1">

        <!-- Кнопки для переключения файлов -->
        <button id="prevBtn">Предыдущее</button>
        <button id="nextBtn">Следующее</button>

        <script>
            // Массив с публичными ссылками на аудиофайлы из репозитория GitHub
            const audioFiles = [
                "https://raw.githubusercontent.com/yumi909/posva2024/main/1.mp3", 
                "https://raw.githubusercontent.com/yumi909/posva2024/main/2.mp3", 
                "https://raw.githubusercontent.com/yumi909/posva2024/main/3.mp3",
                "https://raw.githubusercontent.com/yumi909/posva2024/main/4.mp3",
                "https://raw.githubusercontent.com/yumi909/posva2024/main/5.mp3"
            ];

            let currentIndex = 0;

            // Функция для случайного выбора следующего файла
            function getRandomIndex() {
                return Math.floor(Math.random() * audioFiles.length);
            }

            // Функция для загрузки и воспроизведения случайного аудиофайла
            function loadAudio() {
                currentIndex = getRandomIndex(); // Выбираем случайный индекс
                const audioSource = document.getElementById("audioSource");
                audioSource.src = audioFiles[currentIndex];
                const audioPlayer = document.getElementById("audioPlayer");
                audioPlayer.load(); // Перезагружаем плеер с новым источником
                audioPlayer.play(); // Автоматически начинаем воспроизведение
            }

            // Слушатели событий для кнопок переключения для GitHub
            document.getElementById("prevBtn").addEventListener("click", () => {
                currentIndex = getRandomIndex(); // Переключаем на случайный файл
                loadAudio();
            });

            document.getElementById("nextBtn").addEventListener("click", () => {
                currentIndex = getRandomIndex(); // Переключаем на случайный файл
                loadAudio();
            });

            // Инициализация плеера с случайным файлом и автозапуском
            loadAudio();

            // Слушатель для регулировки громкости
            document.getElementById("volumeControl").addEventListener("input", function() {
                const audioPlayer = document.getElementById("audioPlayer");
                audioPlayer.volume = this.value; // Устанавливаем громкость
            });

            // Управление плеером SoundCloud
            const soundCloudPlayer = document.getElementById("soundcloudPlayer");
            let soundCloudPlaylist = [
                "https://api.soundcloud.com/tracks/123456", // Пример трека, замените на актуальные
                "https://api.soundcloud.com/tracks/789012",
                "https://api.soundcloud.com/tracks/345678"
            ];

            let currentSoundCloudIndex = 0;

            // Функция для смены трека в SoundCloud
            function switchSoundCloudTrack() {
                soundCloudPlayer.src = `https://w.soundcloud.com/player/?url=${soundCloudPlaylist[currentSoundCloudIndex]}&color=%23ff5500&auto_play=true`;
            }

            // Слушатели для кнопок переключения на следующий и предыдущий трек SoundCloud
            document.getElementById("prevSoundCloud").addEventListener("click", () => {
                currentSoundCloudIndex = (currentSoundCloudIndex - 1 + soundCloudPlaylist.length) % soundCloudPlaylist.length;
                switchSoundCloudTrack();
            });

            document.getElementById("nextSoundCloud").addEventListener("click", () => {
                currentSoundCloudIndex = (currentSoundCloudIndex + 1) % soundCloudPlaylist.length;
                switchSoundCloudTrack();
            });

        </script>
    </div>

</body>
</html>
